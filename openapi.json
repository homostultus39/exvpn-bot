{"openapi":"3.1.0","info":{"title":"Amnezia Central API","version":"0.1.0"},"servers":[{"url":"/api/v1"}],"paths":{"/auth/login":{"post":{"tags":["Auth"],"summary":"Login","description":"Authenticate admin by username/password and issue access/refresh JWTs.\nRefresh token is stored in httpOnly cookie for security.","operationId":"login_auth_login_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/refresh":{"post":{"tags":["Auth"],"summary":"Refresh","description":"Validate refresh token and issue new access/refresh tokens.\nRefresh token is read from httpOnly cookie (or request body for backward compatibility).\nBlacklisted or invalid tokens are rejected.","operationId":"refresh_auth_refresh_post","parameters":[{"name":"refresh_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Refresh Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TokenResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/auth/logout":{"post":{"tags":["Auth"],"summary":"Logout","description":"Revoke the current access token and refresh token by adding them to Redis blacklist.\nRefresh token is read from httpOnly cookie (or request body for backward compatibility).","operationId":"logout_auth_logout_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"refresh_token","in":"cookie","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Refresh Token"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/LogoutResponseSchema"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/clients/":{"get":{"tags":["Clients"],"summary":"List Clients","operationId":"list_clients_clients__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ClientWithPeersResponse"},"type":"array","title":"Response List Clients Clients  Get"}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["Clients"],"summary":"Create Client Endpoint","operationId":"create_client_endpoint_clients__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateClientRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/clients/{client_id}":{"get":{"tags":["Clients"],"summary":"Get Client","operationId":"get_client_clients__client_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"client_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Client Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientWithPeersResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Clients"],"summary":"Update Client Endpoint","operationId":"update_client_endpoint_clients__client_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"client_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Client Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateClientRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Clients"],"summary":"Delete Client Endpoint","operationId":"delete_client_endpoint_clients__client_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"client_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Client Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Delete Client Endpoint Clients  Client Id  Delete"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/clients/{client_id}/subscribe":{"post":{"tags":["Clients"],"summary":"Subscribe Client Endpoint","operationId":"subscribe_client_endpoint_clients__client_id__subscribe_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"client_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Client Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/SubscribeRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClientResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/clusters/":{"get":{"tags":["Clusters"],"summary":"List Clusters","operationId":"list_clusters_clusters__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ClusterWithStatusResponse"},"type":"array","title":"Response List Clusters Clusters  Get"}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["Clusters"],"summary":"Create Cluster Endpoint","operationId":"create_cluster_endpoint_clusters__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateClusterRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClusterResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/clusters/{cluster_id}":{"get":{"tags":["Clusters"],"summary":"Get Cluster","operationId":"get_cluster_clusters__cluster_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"cluster_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Cluster Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClusterWithStatusResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Clusters"],"summary":"Update Cluster Endpoint","operationId":"update_cluster_endpoint_clusters__cluster_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"cluster_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Cluster Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateClusterRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClusterResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Clusters"],"summary":"Delete Cluster Endpoint","operationId":"delete_cluster_endpoint_clusters__cluster_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"cluster_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Cluster Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Delete Cluster Endpoint Clusters  Cluster Id  Delete"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/clusters/{cluster_id}/restart":{"post":{"tags":["Clusters"],"summary":"Restart Cluster","operationId":"restart_cluster_clusters__cluster_id__restart_post","security":[{"HTTPBearer":[]}],"parameters":[{"name":"cluster_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Cluster Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/RestartClusterResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/clusters/sync":{"post":{"tags":["Clusters"],"summary":"Sync Cluster","operationId":"sync_cluster_clusters_sync_post","parameters":[{"name":"x-api-key","in":"header","required":true,"schema":{"type":"string","title":"X-Api-Key"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClusterSyncRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClusterSyncResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/peers/":{"get":{"tags":["Peers"],"summary":"List Peers","operationId":"list_peers_peers__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/PeerResponse"},"type":"array","title":"Response List Peers Peers  Get"}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["Peers"],"summary":"Create Peer Endpoint","operationId":"create_peer_endpoint_peers__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreatePeerRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PeerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/peers/{peer_id}":{"get":{"tags":["Peers"],"summary":"Get Peer","operationId":"get_peer_peers__peer_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"peer_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Peer Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PeerResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Peers"],"summary":"Delete Peer Endpoint","operationId":"delete_peer_endpoint_peers__peer_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"peer_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Peer Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"object","additionalProperties":true,"title":"Response Delete Peer Endpoint Peers  Peer Id  Delete"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/tariffs/":{"get":{"tags":["Tariffs"],"summary":"Get All Tariffs Endpoint","operationId":"get_all_tariffs_endpoint_tariffs__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/TariffResponse"},"type":"array","title":"Response Get All Tariffs Endpoint Tariffs  Get"}}}}},"security":[{"HTTPBearer":[]}]},"post":{"tags":["Tariffs"],"summary":"Create Tariff Endpoint","operationId":"create_tariff_endpoint_tariffs__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateTariffRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TariffResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"HTTPBearer":[]}]}},"/tariffs/active":{"get":{"tags":["Tariffs"],"summary":"Get Active Tariffs Endpoint","operationId":"get_active_tariffs_endpoint_tariffs_active_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ActiveTariffsResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/tariffs/{tariff_id}":{"get":{"tags":["Tariffs"],"summary":"Get Tariff Endpoint","operationId":"get_tariff_endpoint_tariffs__tariff_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"tariff_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Tariff Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TariffResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"patch":{"tags":["Tariffs"],"summary":"Update Tariff Endpoint","operationId":"update_tariff_endpoint_tariffs__tariff_id__patch","security":[{"HTTPBearer":[]}],"parameters":[{"name":"tariff_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Tariff Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateTariffRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TariffResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Tariffs"],"summary":"Delete Tariff Endpoint","operationId":"delete_tariff_endpoint_tariffs__tariff_id__delete","security":[{"HTTPBearer":[]}],"parameters":[{"name":"tariff_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Tariff Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/statistics/":{"get":{"tags":["Statistics"],"summary":"Get Global Statistics","operationId":"get_global_statistics_statistics__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/GlobalStatsResponse"}}}}},"security":[{"HTTPBearer":[]}]}},"/statistics/clusters/{cluster_id}":{"get":{"tags":["Statistics"],"summary":"Get Cluster Statistics","operationId":"get_cluster_statistics_statistics_clusters__cluster_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"cluster_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Cluster Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ClusterStatsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/statistics/peers/{peer_id}":{"get":{"tags":["Statistics"],"summary":"Get Peer Statistics","operationId":"get_peer_statistics_statistics_peers__peer_id__get","security":[{"HTTPBearer":[]}],"parameters":[{"name":"peer_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Peer Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PeerWithStatsResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"summary":"Health Check","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"ActiveTariffsResponse":{"properties":{"enabled":{"type":"boolean","title":"Enabled"},"tariffs":{"items":{"$ref":"#/components/schemas/TariffResponse"},"type":"array","title":"Tariffs"}},"type":"object","required":["enabled","tariffs"],"title":"ActiveTariffsResponse"},"AppType":{"type":"string","enum":["amnezia_vpn","amnezia_wg"],"title":"AppType"},"ClientResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"username":{"type":"string","title":"Username"},"expires_at":{"type":"string","format":"date-time","title":"Expires At"},"subscription_status":{"type":"string","title":"Subscription Status"},"trial_used":{"type":"boolean","title":"Trial Used"},"last_subscription_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Subscription At"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","username","expires_at","subscription_status","trial_used","last_subscription_at","created_at","updated_at"],"title":"ClientResponse"},"ClientWithPeersResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"username":{"type":"string","title":"Username"},"expires_at":{"type":"string","format":"date-time","title":"Expires At"},"subscription_status":{"type":"string","title":"Subscription Status"},"trial_used":{"type":"boolean","title":"Trial Used"},"last_subscription_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Subscription At"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"peers_count":{"type":"integer","title":"Peers Count","default":0}},"type":"object","required":["id","username","expires_at","subscription_status","trial_used","last_subscription_at","created_at","updated_at"],"title":"ClientWithPeersResponse"},"ClientsByStatus":{"properties":{"active":{"type":"integer","title":"Active","default":0},"trial":{"type":"integer","title":"Trial","default":0},"expired":{"type":"integer","title":"Expired","default":0}},"type":"object","title":"ClientsByStatus"},"ClientsStats":{"properties":{"total":{"type":"integer","title":"Total"},"by_status":{"$ref":"#/components/schemas/ClientsByStatus"}},"type":"object","required":["total","by_status"],"title":"ClientsStats"},"ClusterClientsStats":{"properties":{"total":{"type":"integer","title":"Total"}},"type":"object","required":["total"],"title":"ClusterClientsStats"},"ClusterInfo":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"protocol":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Protocol"},"container_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Container Status"},"is_active":{"type":"boolean","title":"Is Active"}},"type":"object","required":["id","name","protocol","container_status","is_active"],"title":"ClusterInfo"},"ClusterResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"endpoint":{"type":"string","title":"Endpoint"},"is_active":{"type":"boolean","title":"Is Active"},"last_handshake":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Handshake"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","name","endpoint","is_active","last_handshake","created_at","updated_at"],"title":"ClusterResponse"},"ClusterStatsResponse":{"properties":{"cluster":{"$ref":"#/components/schemas/ClusterInfo"},"clients":{"$ref":"#/components/schemas/ClusterClientsStats"},"peers":{"$ref":"#/components/schemas/PeersStats"},"traffic":{"$ref":"#/components/schemas/TrafficStats"}},"type":"object","required":["cluster","clients","peers","traffic"],"title":"ClusterStatsResponse"},"ClusterSyncRequest":{"properties":{"protocol":{"type":"string","title":"Protocol"},"container_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Container Name"},"container_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Container Status"},"peers":{"items":{"$ref":"#/components/schemas/PeerStatusUpdate"},"type":"array","title":"Peers"},"server_traffic":{"$ref":"#/components/schemas/ServerTrafficUpdate"},"sync_timestamp":{"type":"string","format":"date-time","title":"Sync Timestamp"}},"type":"object","required":["protocol","peers","server_traffic","sync_timestamp"],"title":"ClusterSyncRequest"},"ClusterSyncResponse":{"properties":{"status":{"type":"string","title":"Status"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["status","timestamp"],"title":"ClusterSyncResponse"},"ClusterWithStatusResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"name":{"type":"string","title":"Name"},"endpoint":{"type":"string","title":"Endpoint"},"is_active":{"type":"boolean","title":"Is Active"},"last_handshake":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Handshake"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"container_status":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Container Status"},"container_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Container Name"},"protocol":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Protocol"},"peers_count":{"type":"integer","title":"Peers Count","default":0},"online_peers_count":{"type":"integer","title":"Online Peers Count","default":0}},"type":"object","required":["id","name","endpoint","is_active","last_handshake","created_at","updated_at"],"title":"ClusterWithStatusResponse"},"ClustersStats":{"properties":{"total":{"type":"integer","title":"Total"},"active":{"type":"integer","title":"Active"},"inactive":{"type":"integer","title":"Inactive"}},"type":"object","required":["total","active","inactive"],"title":"ClustersStats"},"CreateClientRequest":{"properties":{"username":{"type":"string","title":"Username"}},"type":"object","required":["username"],"title":"CreateClientRequest"},"CreateClusterRequest":{"properties":{"name":{"type":"string","title":"Name"},"endpoint":{"type":"string","title":"Endpoint"},"api_key":{"type":"string","title":"Api Key"}},"type":"object","required":["name","endpoint","api_key"],"title":"CreateClusterRequest"},"CreatePeerRequest":{"properties":{"cluster_id":{"type":"string","format":"uuid","title":"Cluster Id"},"client_id":{"type":"string","format":"uuid","title":"Client Id"},"app_type":{"$ref":"#/components/schemas/AppType"},"protocol":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Protocol"}},"type":"object","required":["cluster_id","client_id","app_type"],"title":"CreatePeerRequest"},"CreateTariffRequest":{"properties":{"code":{"type":"string","maxLength":50,"minLength":1,"title":"Code"},"name":{"type":"string","maxLength":255,"minLength":1,"title":"Name"},"days":{"type":"integer","exclusiveMinimum":0.0,"title":"Days"},"price_rub":{"type":"integer","minimum":0.0,"title":"Price Rub"},"price_stars":{"type":"integer","minimum":0.0,"title":"Price Stars"},"is_active":{"type":"boolean","title":"Is Active","default":true},"sort_order":{"type":"integer","title":"Sort Order","default":0}},"type":"object","required":["code","name","days","price_rub","price_stars"],"title":"CreateTariffRequest"},"GlobalStatsResponse":{"properties":{"clusters":{"$ref":"#/components/schemas/ClustersStats"},"clients":{"$ref":"#/components/schemas/ClientsStats"},"peers":{"$ref":"#/components/schemas/PeersStats"},"traffic":{"$ref":"#/components/schemas/TrafficStats"}},"type":"object","required":["clusters","clients","peers","traffic"],"title":"GlobalStatsResponse"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LoginRequest":{"properties":{"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"}},"type":"object","required":["username","password"],"title":"LoginRequest"},"LogoutResponseSchema":{"properties":{"message":{"type":"string","title":"Message","default":"Logged out"}},"type":"object","title":"LogoutResponseSchema"},"PeerResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"client_id":{"type":"string","format":"uuid","title":"Client Id"},"cluster_id":{"type":"string","format":"uuid","title":"Cluster Id"},"public_key":{"type":"string","title":"Public Key"},"allocated_ip":{"type":"string","title":"Allocated Ip"},"endpoint":{"type":"string","title":"Endpoint"},"app_type":{"type":"string","title":"App Type"},"protocol":{"type":"string","title":"Protocol"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"config":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Config"},"config_download_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Config Download Url"}},"type":"object","required":["id","client_id","cluster_id","public_key","allocated_ip","endpoint","app_type","protocol","created_at","updated_at"],"title":"PeerResponse"},"PeerStatusUpdate":{"properties":{"public_key":{"type":"string","title":"Public Key"},"endpoint":{"type":"string","title":"Endpoint"},"allowed_ips":{"items":{"type":"string"},"type":"array","title":"Allowed Ips"},"last_handshake":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Handshake"},"rx_bytes":{"type":"integer","title":"Rx Bytes"},"tx_bytes":{"type":"integer","title":"Tx Bytes"},"online":{"type":"boolean","title":"Online"},"persistent_keepalive":{"type":"integer","title":"Persistent Keepalive"}},"type":"object","required":["public_key","endpoint","allowed_ips","last_handshake","rx_bytes","tx_bytes","online","persistent_keepalive"],"title":"PeerStatusUpdate"},"PeerWithStatsResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"client_id":{"type":"string","format":"uuid","title":"Client Id"},"cluster_id":{"type":"string","format":"uuid","title":"Cluster Id"},"protocol":{"type":"string","title":"Protocol"},"app_type":{"type":"string","title":"App Type"},"last_handshake":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Handshake"},"rx_bytes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Rx Bytes"},"tx_bytes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Tx Bytes"},"online":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Online"}},"type":"object","required":["id","client_id","cluster_id","protocol","app_type"],"title":"PeerWithStatsResponse"},"PeersByAppType":{"properties":{"amnezia_vpn":{"type":"integer","title":"Amnezia Vpn","default":0},"amnezia_wg":{"type":"integer","title":"Amnezia Wg","default":0}},"type":"object","title":"PeersByAppType"},"PeersStats":{"properties":{"total":{"type":"integer","title":"Total"},"online":{"type":"integer","title":"Online"},"by_app_type":{"$ref":"#/components/schemas/PeersByAppType"}},"type":"object","required":["total","online","by_app_type"],"title":"PeersStats"},"RestartClusterResponse":{"properties":{"cluster_id":{"type":"string","format":"uuid","title":"Cluster Id"},"status":{"type":"string","title":"Status"},"message":{"type":"string","title":"Message"}},"type":"object","required":["cluster_id","status","message"],"title":"RestartClusterResponse"},"ServerTrafficUpdate":{"properties":{"total_rx_bytes":{"type":"integer","title":"Total Rx Bytes"},"total_tx_bytes":{"type":"integer","title":"Total Tx Bytes"},"total_peers":{"type":"integer","title":"Total Peers"},"online_peers":{"type":"integer","title":"Online Peers"}},"type":"object","required":["total_rx_bytes","total_tx_bytes","total_peers","online_peers"],"title":"ServerTrafficUpdate"},"SubscribeRequest":{"properties":{"tariff_code":{"type":"string","pattern":"^(30|90|180|360)$","title":"Tariff Code"}},"type":"object","required":["tariff_code"],"title":"SubscribeRequest"},"TariffResponse":{"properties":{"id":{"type":"string","format":"uuid","title":"Id"},"code":{"type":"string","title":"Code"},"name":{"type":"string","title":"Name"},"days":{"type":"integer","title":"Days"},"price_rub":{"type":"integer","title":"Price Rub"},"price_stars":{"type":"integer","title":"Price Stars"},"is_active":{"type":"boolean","title":"Is Active"},"sort_order":{"type":"integer","title":"Sort Order"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"}},"type":"object","required":["id","code","name","days","price_rub","price_stars","is_active","sort_order","created_at","updated_at"],"title":"TariffResponse"},"TokenResponse":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"}},"type":"object","required":["access_token"],"title":"TokenResponse"},"TrafficStats":{"properties":{"total_rx_bytes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Rx Bytes"},"total_tx_bytes":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Total Tx Bytes"}},"type":"object","title":"TrafficStats"},"UpdateClientRequest":{"properties":{"expires_at":{"type":"string","format":"date-time","title":"Expires At"}},"type":"object","required":["expires_at"],"title":"UpdateClientRequest"},"UpdateClusterRequest":{"properties":{"name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Name"},"endpoint":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Endpoint"},"api_key":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Api Key"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"}},"type":"object","title":"UpdateClusterRequest"},"UpdateTariffRequest":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":255,"minLength":1},{"type":"null"}],"title":"Name"},"days":{"anyOf":[{"type":"integer","exclusiveMinimum":0.0},{"type":"null"}],"title":"Days"},"price_rub":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Price Rub"},"price_stars":{"anyOf":[{"type":"integer","minimum":0.0},{"type":"null"}],"title":"Price Stars"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"sort_order":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Sort Order"}},"type":"object","title":"UpdateTariffRequest"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"},"input":{"title":"Input"},"ctx":{"type":"object","title":"Context"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"HTTPBearer":{"type":"http","scheme":"bearer"}}}}